<%- include('partials/header'); -%>

<link rel="stylesheet" media="screen,print" href='/static/sortable/sortable.css'>
<script src="/static/sortable/sortable.js"></script>
<style media="screen">
  .panel { overflow: scroll; }
</style>

<div class="container">

  <% if (errors.length) { %>
    <div class="notification error"><%= errors %></div>
  <% } %>

  <div class="panel">
  <h1>Comptes Expirés</h1>
  <table class="sortable"><!-- why not use 'table' class as well ? conflicts 'sortable' class (thead) -->
    <thead>
      <tr>
        <th>Id</th>
        <th>Date de fin</th>
        <th>Compte Email</th> 
        <th>Redirections</th>
        <th>Fiche sur Github</th>
      </tr>
    </thead>
    <tbody>
      <% emailsExpirated.forEach(function(email) { %>
        <tr>
          <td><%= email.id %></td>
          <td><% if (email.endDate) { %><%= email.endDate %><% } else { %>❌ Non !<% } %></td>
          <td><% if (email.account) { %>✔ Oui<% } else { %>❌ Non !<% } %></td>
          <td>
            <ul>
              <% email.redirections.forEach(function(redirection) { %>
                <li><%= redirection %></li>
              <% }) %>
            </ul>
          </td> 
          <td><% if (email.github) { %>✔ Oui<% } else { %>❌ Non !<% } %></td>
        </tr>
      <% }) %>
    </tbody>
  </table>
  </div>

<%- include('partials/footer'); -%>
