<%- include('partials/header'); -%>

<div class="container container-small">

    <% if (errors.length) { %>
    <div class="notification error">
        <% errors.forEach(function(error) { %>
            <li><strong>Erreur : </strong><%= error %></li>
        <% }) %>
    </div>
    <% } %>

    <% if (messages.length) { %>
    <div class="notification">
        <%- messages %>
    </div>
    <% } %>

    <div class="panel margin-top-m">
        <h3>Mise à jour de mes informations</h3>

        <div class="beta-banner"></div>

        <form action="/onboarding" method="POST" onsubmit="event.submitter && (event.submitter.disabled = true);">
            <h4>Tes infos persos</h4>

            <div class="form__group">
                <p>
                    
                </p>
                <div class="form__group">
                    <label for="gender">
                        <strong>Genre</strong><br />
                        Cette informations est utilisée uniquement pour faire des statistique et afficher null part.
                    </label>
                    <select name="gender" placeholder="Sélectionne une valeur" required>
                        <!-- <option value=""></option> -->
                        <% [{
                            key: 'female',
                            name: "Feminin"
                        },{
                            key: 'male',
                            name: "Masculin"
                        },{
                            key: 'nb',
                            name: "Non-binaire"
                        }, {
                            key: 'nps',
                            name: "Ne se prononce pas"
                        }].forEach(function(gender) { %>
                            <option value="<%= gender.key %>" <%= (gender.key === formData.gender) ? 'selected' : '' %>><%= gender.name %></option>
                        <% }) %>
                    </select>
                    <% if(formValidationErrors['domaine']) { %>
                      <p class="text-small text-color-red"><%= formValidationErrors['gender'] %></p>
                    <% } %>
                </div>
            </div>

            <div class="form__group">
                <label for="description">
                    <strong>Lieu de travail</strong><br />
                    Cette information est utilisé pour faire une carte des membres de la communauté 
                    <input
                        placeholder="Commune ou code postale"
                        type="text"
                        id="input-commune" onkeyup="searchCommunes(event)">
                    <input type="text" id="input-insee-code" value="" hidden>
                    <ul id="list-container-city"
                    >
                    </ul>
                </label>
            </div>

            <div class="form__group">
                <label for="description">
                    <strong>TJM moyen ht</strong><br />
                    Cette informations est utilisée uniquement pour faire des statistique et afficher null part.
                    <input type="number" placeholder="TJM moyen ht en euros">
                </label>
            </div>
            <div class="form__group">
                <label for="status">
                    <strong>Statut legal de ton entreprise</strong><br />
                </label>
                <% statusOptions.forEach(function(status) { %>
                    <input type="radio" name="status" value="<%= status %>" <%= (status === formData.status) ? 'checked' : '' %> required><%= status %><br>
                <% }) %>
                <% if(formValidationErrors['statut']) { %>
                  <p class="text-small text-color-red"><%= formValidationErrors['statut'] %></p>
                <% } %>
            </div>
            <div class="form__group">
                <label for="startup">
                    <strong>Startup d'État</strong><br />
                    Laisser vide si elle n'apparaît pas. Tu pourras modifier ton profil plus tard.
                </label>
                <select name="startup">
                    <option value=""></option>
                    <% startups.forEach(function(startup) { %>
                        <option value="<%= startup.id %>" <%= (startup.id === formData.startup) ? 'selected' : '' %>><%= startup.attributes.name %></option>
                    <% }) %>
                </select>
            </div>
            <button class="button" type="submit">Soumettre ma demande</button>
        </form>
    </div>
</div>
<%- include('partials/footer'); -%>
<script src="/static/scripts/searchCommune.js"></script>
